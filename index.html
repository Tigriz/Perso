<!doctype html>
<html lang="fr">

<head>
    <title>Tigriz</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no user-scalable=no">
    <!-- utiliser max scale min scale ^ -->
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <link rel="stylesheet" href="css/reset.css" />
    <link rel="stylesheet" href="css/index.css" />
    <link rel="icon" href="img/favicon.png" />

    <script type="text/javascript" src="js/paper-full.min.js"></script>

    <link rel="preload" href="font/MadokaRunes.woff2" as="font" type="font/woff2" crossorigin="anonymous" />
    <link rel="preload" href="font/MadokaRunes.woff" as="font" type="font/woff" crossorigin="anonymous" />
    <link rel="prefetch" href="img/transition.gif" as="image" />
</head>

<body>
    <div id="loading" class="section fullscreen">
        <div class="grid">
            <img class="running" src="img/running0.gif">
            <div class="letter">S</div>
        </div>
        <div class="grid">
            <img class="running" src="img/running1.gif">
            <div class="letter">A</div>
        </div>
        <div class="grid">
            <img class="running" src="img/running2.gif">
            <div class="letter">Y</div>
        </div>
        <div class="grid">
            <img class="running" src="img/running3.gif">
            <div class="letter">A</div>
        </div>
        <div class="grid">
            <img class="running" src="img/running4.gif">
            <div class="letter">K</div>
        </div>
        <div class="grid">
            <img class="running" src="img/running5.gif">
            <div class="letter">A</div>
        </div>
    </div>
    <div id="menu" class="section" style="display:none">
        <audio id="decretum" src="audio/decretum.ogg"></audio>
        <div id="music">
            <div class="line"></div>
            <div class="line"></div>
            <div class="line"></div>
            <div class="line"></div>
            <div class="line"></div>
            <div class="line"></div>
            <table class="full-bar selected">
                <tbody>
                    <tr>
                        <td>sayaka</td>
                        <td>madoka</td>
                        <td>homura</td>
                        <td>kyouko</td>
                        <td>kyubey</td>
                    </tr>
                </tbody>
            </table>
            <table class="full-bar selected">
                <tbody>
                    <tr>
                        <td>sayaka</td>
                        <td>madoka</td>
                        <td>homura</td>
                        <td>kyouko</td>
                        <td>kyubey</td>
                    </tr>
                </tbody>
            </table>
            <table class="full-bar selected">
                <tbody>
                    <tr>
                        <td>sayaka</td>
                        <td>madoka</td>
                        <td>homura</td>
                        <td>kyouko</td>
                        <td>kyubey</td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div class="hide-bar"></div>
        <div class="hide-bar full"></div>
        <img id="sword" class="pointer" src="img/sword.png">
        <img id="oktavia" class="pointer" src="img/oktavia.png">
        <img id="sayaka" class="pointer" src="img/sayaka.png">
        <div id="soulgem" class="fullscreen">
            <div id="glow" class="fullscreen"></div>
            tig<img class="pointer" onclick="soulgem()" src="img/soulgem.gif">riz
        </div>
        <div id="droplet" class="fullscreen">
            <img style="transform: translateY(-1000px)" src="img/droplet.png">
        </div>
    </div>
    <canvas id="canvas" resize hidpi="off" style="display:none" class="fullscreen"></canvas>
    <div id="sub-soulgem" class="section fullscreen" style="display:none">
        <div class="container" style="display:none">
            <div class="box" style="width: 18%">
                <h1>Titre</h1><br>
                Lorem ipsum dolor, sit amet consectetur adipisicing elit. Sunt, nisi cumque. Voluptatibus possimus
                aperiam expedita debitis aliquam. Magni similique sed culpa sit aspernatur aliquid nihil laboriosam.
                Iste, illo? Nisi, praesentium?
            </div>
            <div class="box" style="width: 78%">
                <h1>Titre</h1><br>
                Lorem ipsum dolor, sit amet consectetur adipisicing elit. Sunt, nisi cumque. Voluptatibus possimus
                aperiam expedita debitis aliquam. Magni similique sed culpa sit aspernatur aliquid nihil laboriosam.
                Iste, illo? Nisi, praesentium?
                Lorem ipsum, dolor sit amet consectetur adipisicing elit. Illo ex quaerat nesciunt vitae fugiat,
                perspiciatis obcaecati tempora, perferendis ipsum earum ratione. Libero molestias aliquid facere
                consequatur voluptas ducimus tenetur ipsa?
            </div>
            <div class="box" style="width: 78%">
                <h1>Titre</h1><br>
                Lorem ipsum dolor, sit amet consectetur adipisicing elit. Sunt, nisi cumque. Voluptatibus possimus
                aperiam expedita debitis aliquam. Magni similique sed culpa sit aspernatur aliquid nihil laboriosam.
                Iste, illo? Nisi, praesentium?
                Lorem ipsum dolor sit amet consectetur adipisicing elit. Autem expedita omnis quae dolore quaerat labore
                iste illum fugit, laborum ad sunt ipsam? Veritatis ut ipsam numquam et veniam commodi molestias.
            </div>
            <div class="box" style="width: 18%">
                <h1>Titre</h1><br>
                Lorem ipsum dolor, sit amet consectetur adipisicing elit. Sunt, nisi cumque. Voluptatibus possimus
                aperiam expedita debitis aliquam. Magni similique sed culpa sit aspernatur aliquid nihil laboriosam.
                Iste, illo? Nisi, praesentium?
            </div>
        </div>
    </div>
    <script>
        function onReady(callback) {
            var intervalId = window.setInterval(function () {
                if (document.getElementsByTagName('body')[0] !== undefined) {
                    window.clearInterval(intervalId);
                    callback.call(this);
                }
            }, 1000);
        }

        onReady(function () {
            document.querySelector("#menu").style = "";
            document.querySelector("audio").volume = 0.5;
            document.querySelector("audio").play();
            document.querySelector("#loading").style = 'opacity:0';
            setTimeout(function(){document.querySelector("#loading").style = 'display:none'}, 1000);
        });

        function soulgem() {
            document.querySelector('#droplet img').style = "";
            setTimeout(() => document.querySelector('#sub-soulgem').style = "background:url('img/transition.gif') no-repeat center center fixed; background-size:cover;", 500);
            setTimeout(function () {
                document.querySelector('#canvas').style = "background: url('resources/img/bridge_bus_star.png') no-repeat center center fixed; background-size: cover;";
                document.querySelector('#sub-soulgem').style = "";
                document.querySelector('#sub-soulgem .container').style = "";
                document.querySelector('#menu').style = "display:none";
            }, 1200);
        };
    </script>
    <script type="text/paperscript" canvas="canvas">
        // The amount of symbol we want to place;
        var count = 150;

        view.viewSize.width = window.innerWidth;
        view.viewSize.height = window.innerHeight;

        // Create a symbol, which we will use to place instances of later:
        var path = new Path.Circle({
            center: new Point(0, 0),
            radius: 5,
            fillColor: 'white'
        });

        var symbol = new SymbolDefinition(path);

        // Place the instances of the symbol:
        for (var i = 0; i < count; i++) {
            // The center position is a random point in the view:
            var center = Point.random() * view.size;
            var placed = symbol.place(center);
            var scale = (i + 1) / count;
            placed.scale(scale);
            placed.data.vector = new Point({
                angle: Math.random() * 360,
                length : scale * Math.random() / 5
            });
        }

        var vector = new Point({
            angle: 45,
            length: 0
        });

        var mouseVector = vector.clone();

        function onMouseMove(event) {
            mouseVector = view.center - event.point;
        }

        // The onFrame function is called up to 60 times a second:
        function onFrame(event) {
            vector = vector + (mouseVector - vector) / 30;

            // Run through the active layer's children list and change
            // the position of the placed symbols:
            for (var i = 0; i < count; i++) {
                var item = project.activeLayer.children[i];
                var size = item.bounds.size;
                var length = vector.length / 50 * size.width / 50;
                item.position += vector.normalize(length) + item.data.vector;
                keepInView(item);
            }
        }

        function keepInView(item) {
            var position = item.position;
            var itemBounds = item.bounds;
            var bounds = view.bounds;
            if (itemBounds.left > bounds.width) {
                position.x = -item.bounds.width;
            }

            if (position.x < -itemBounds.width) {
                position.x = bounds.width + itemBounds.width;
            }

            if (itemBounds.top > view.size.height) {
                position.y = -itemBounds.height;
            }

            if (position.y < -itemBounds.height) {
                position.y = bounds.height  + itemBounds.height / 2;
            }
        }
    </script>
</body>

</html>